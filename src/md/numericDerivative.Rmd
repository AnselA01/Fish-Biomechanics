---
title: Numeric Derivatives
output: html_document
editor_options: 
  chunk_output_type: console
---


```{r}
library(numDeriv)

source_files <- list.files("./src/script", full.names = TRUE, pattern = "*.R")
map(paste0(source_files), source)
```


## Linear interpoolation

 - this is a linear equation between two points to find where the arithmetic derivative crosses 0.

$$d2{\text{inflection}}\frac{0 - \text{d2}[i]}{\text{d2}[i+1] - \text{d2}[i]}$$

linear interpolation between two points d2_1 (2nd derivative #1 and #2 where #1 is positive and #2 is negative). (0 - d2i) / (d2i+1 - d2i) is the relative distance (as a proportion) between d2_1 and d2_2 where d2 is 0. The alternative method where the mean is taken between strain_i and strain_i+1 incorrectly assumes a uniform change from d2_i to d2_i+1.

```{r}
linear_interpolation <- function(d2_1, d2_2) {
  return ((0 - d2_1 / (d2_2 - d2_1)))
}
```

```{r}
fish_9_list <- coro::collect(data.generator("./data", fish_number = 9))

cp01 <- fish_9_list[[1]]
```



