---
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
library(tidyverse)
library(coro)
library(gridExtra)
library(ggtext)
library(segmented)
library(changepoint)
library(matrixStats)
library(scales)

setwd("/home/rstudio/users/hahs1/CIR_2024_25_Fish_Vertebrae")
data_directory <- "./data"
script_directory <- "./src/script/"
```

## Source files. re-run this chunk when you make changes to any .R file
```{r}
source_files <- list.files(script_directory, full.names = TRUE, pattern = "*.R")
map(paste0(source_files), source)
```


```{r}
pf09cp01 <- data.fetch(subject = "pf09cp1")
pf09lt01 <- data.fetch(subject = "pf09lt1")
pf09ut01 <- data.fetch(subject = "pf09ut1")
pf09mt01 <- data.fetch(subject = "pf09mt1")
pf10cp01 <- data.fetch(subject = "pf10cp1")
pf19mt01 <- data.fetch(subject = "pf19mt1")
pf19cp01 <- data.fetch(subject = "pf19cp1")
pf16cp01 <- data.fetch(subject = "pf16cp1")
pf17mt01 <- data.fetch(subject = "pf17mt1")
pf16ut01 <- data.fetch(subject = "pf16ut1")
pf03lt01 <- data.fetch(subject = "pf03lt1")
pf07ut01 <- data.fetch(subject = "pf07ut1")
pf16lt01 <- data.fetch(subject = "pf16lt1")

fish_list <- list(pf09cp01, pf09lt01, pf09ut01, pf09mt01, pf10cp01, pf19mt01, pf19cp01, pf16cp01, pf17mt01, pf16ut01, pf03lt01, pf07ut01, pf16lt01)
```

```{r}
names <- c(
"pf09cp01", "pf09lt01", "pf09ut01", "pf09mt01", "pf10cp01", "pf19mt01", "pf19cp01", "pf16cp01", "pf17mt01", "pf16ut01", "pf03lt01", "pf07ut01", "pf16lt01")


slopes <- map(fish_list, ~ {
  slope <- concavitySlope(.x, interpolate = FALSE)
})

```








